# 一生一芯



# 概论

+ 计算机系统的组成：软件和硬件在**逻辑上是等效**的

  1. 软件：
     1. 系统软件：用来管理整个计算机的程序：
        + 操作系统、数据库管理系统、标准程序库、网络软件、语言处理软件（编译器、解释器）、服务程序（ege：IDE）
        
        > 翻译程序有编译程序和解释程序两种
        >
        > + 编译程序：全部翻译，重复使用
        > + 解释程序：一句一翻，再用再翻
     2. 应用软件：按任务需要编制成的各种程序
     
  2. 硬件：

## 发展历程和分类

+ 电子计算机的发展：强调电子计算机（此前还有其他类型计算机（比如差分机之类的））

  > + 第一台电子计算机ENIAC：1946美国宾夕法尼亚大学：十进制，接线编程

  | 时间      | 逻辑元件                 | 内存           | 外存                           |
  | --------- | ------------------------ | -------------- | ------------------------------ |
  | 1946-1957 | 电子管                   | 汞延迟线、磁鼓 | 穿孔卡带、纸带                 |
  | 1958-1964 | 晶体管                   | 磁芯存储器     | 磁带                           |
  | 1964-1971 | 中小规模集成电路         | 半导体存储器   | 磁带、磁盘                     |
  | 1972-今   | 大规模、超大规模集成电路 | 半导体存储器   | 磁盘、磁带、光盘、半导体存储器 |

  1. 电子管计算机：

  2. 晶体管计算机：存储器使用磁芯存储器、出现面向过程的程序语言（FORTRAM）、出现操作系统雏形

  3. （中小规模）集成电路计算机：出现分时操作系统

     + IBM360系统：通用化、系列化、标准化

     > 1947，贝尔实验室发明晶体管
     >
     > 1955，贝尔实验室成员肖克利在硅谷创建晶体管公司
     >
     > 1957，八叛徒创立仙童公司
     >
     > 1959，仙童公司发明集成电路
     >
     > + 1968，摩尔（八叛徒之一）离开仙童，创建Intel
     >
     >   1969，桑德斯（仙童员工）离开仙童，创建AMD

     + 摩尔定律：集成电路上可容纳的晶体管数目，每个18或24个月翻一番，即 性能提升一倍，或 成本降低一半

  4. 大、超大规模集成电路计算机：存储器使用半导体存储器，出现微处理器（CPU）——微型计算机、个人计算机萌芽，操作系统成熟、出现并行、流水线、高速缓存和虚拟存储器等概念。

  > 目前计算机中的信息仍以二进制的方式表示就是因为物理器件的性能决定的

+ 计算机系统的分类：

  ```mermaid
  graph LR;
  	电子计算机 --> 电子模拟计算机
  	电子计算机 --> 电子数字计算机
  	电子数字计算机 --> 专用计算机
  	电子数字计算机 --> 通用计算机
  ```

  + 根据指令流和数据流数量进行分类（弗林分类）：

    + 指令流：机器执行的指令序列

      数据流：由指令流调用的数据序列

    | 名称 | 结构组成             | 运行特点 | 举例                     |
    | ---- | -------------------- | -------- | ------------------------ |
    | SISD | 单指令流<br>单数据流 |          | 冯诺依曼                 |
    | SIMD | 单指令流<br>多数据流 |          | 阵列处理器<br>向量处理器 |
    | MISD | 多指令流<br>单数据流 |          | 不存在                   |
    | MIMD | 多指令流<br>多数据流 |          | 多处理器                 |
    

## 体系结构

+ 计算机体系结构：

  + 冯诺依曼体系：

    + 计算机由**运算器、控制器、存储器、输入设备和输出设备**5部分组成
    
    + 采用存储程序的方式，指令和数据以同等地位存于存储器，以二进制码表示，可按地址寻址
    
      > 如何区分？通过指令周期的不同阶段：在取指令阶段的是地址，在取数据阶段是数据
    
    + 指令由操作码和地址码组成，在存储器中顺序存放，由指令计数器（即程序计数器PC）指明要执行的指令所在的存储单元地址，一般按顺序递增，但可按运算结果或外界条件而改变。
    
    + 机器以**运算器**为中心，输入输出设备与存储器间的数据传送都通过运算器。
    
    ![](https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/冯诺依曼.jpg)
    
    + 工作方式：控制流驱动方式

  > 旧因存储器容量小，故IO必须经过运算器，现CPU速度远远大于IO速度，故不再需要以运算器为中心

  + 现代计算机结构：

     <img src="https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/现代计算机结构.jpg" style="zoom:50%;" />

    其中运算器和控制器都集成在CPU中

    ![](https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/现代计算机结构2.jpg)

    + 主存：主机内的主存储器，常说的运存

      辅存：属于IO设备，常说的存储

+ 具体：

  ![](https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/现在计算机结构细节.jpg)

  + 主存储器：

    + 存储地址寄存器(Memory Address Register, MAR)：其位数对应存储单元个数

      存储数据寄存器(Memory Data REgister, MDR）   ：其位数表示存储单元长度

      + 读：MAR要地址，存储体工作，MDR出数据

        写：MAR写地址，MDR写数据，存储体工作

      > 虽然是存储器的一部分，但是现代计算机通常将其放在CPU

    + 存储体：

      + 存储单元：每个存储单元存放一串二进制代码
      + 存储字(word)：存储单元中二进制代码的组合
      + 存储字长：存储单元中二进制代码的位数
      + 存储元，即存储二进制的电子元件，每个存储元可存1bit

      若干存储元组成存储单元，其中个数为存储字长，内容为存储字

  + 运算器：用于实现算术运算和逻辑运算：

    + 累加器(Accumulator, ACC)：用于存放操作数、运算结果
    + 乘商寄存器(Multiple-Quotient Register, MQ)：用于乘除运算中，用于存放操作数、运算结果
    + 通用的操作数寄存器(Arithmetic and Logic Unit, X)：用于存放操作数
    + 算术逻辑单元(Arithmetic and Logical Unit, ALU)：实现算术运算、逻辑运算
    + 等

  + 控制器：

    + 程序计数器(Program, PC)：存放下一条指令地址，自动加一
    + 指令寄存器(Instruction Regisster, IR)：存放当前执行的地址
    + 控制单元(Control Unit, CU)：分析指令，给出控制信号
    + 地址寄存器AR：保存地址

## 代码层次结构

+ 计算机系统的层次结构：

  <img src="https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/计算机系统的层次结构.jpg" style="zoom:67%;" />

  + 三种级别的语言：

    ```mermaid
    graph BT;
    	a["机器语言：二进制代码"]
    	b["汇编语言：助记符"]
    	c[高级语言]
    	
    	c --"编译程序<br>(编译器)"--> b
    	b --"汇编程序<br>(汇编器)"--> a
    	c --"编译程序<br>(编译器)"--> a
    	c --"解释程序<br>(解释器)"--> a
    ```

    + 其中编译程序、解释程序、汇编程序统称为翻译程序

## 性能指标

+ 动态测试：**基准程序**：用于测量计算机处理速度的实用程序：运行一系列**微指令**，监控时间，比较性能

  > 不同类型的集成电路适合的微指令集不同，所以简听简明

+ 计算机性能指标：

  1. 机器字长：计算机能够直接处理的二进制数据的长度

     > 指令字长：一个指令的字长，存储字长：一个存储单元的字长

  2. 数据通路带宽：数据总线一次所能并行传送信息的位数

  3. 存储器容量：主存容量 = 字数 $\times$ 字长（存储单元个数 * 存储字长）：

     前者指MAR的位数（$1K = 2^{10}$），后者是MDR的位数

  4. 运算速度：

     1. 吞吐量：系统在单位时间内处理请求的数量

     2. 响应时间：请求从发送到做出相应的等待时间

     3. CPU：

        + CPU主频        ：CPU内数字脉冲信号震荡的频率

          CPU时钟周期：主频的倒数——主频是**单位时间有多少个时钟周期**

        + CPI：执行一条指令所需的时钟周期数（CLock cycle Per Instruction）

          > $（指令在）CPU中执行时间 = 时钟周期数量 / 主频 = \sum{每个指令的CPI} / 主频$

        + IPS：每秒执行多少条指令（Instructions Per Second）：$IPS = 主频 / ave(CPI)$
