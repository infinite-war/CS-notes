# IO

## IO设备

## IO接口

> 这是一个独立的系统（CPU）有自己的指令

## IO方式（中断）

![](https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/IO方式.jpg)

### 程序查询方式

### 程序中断方式

> 用于：
>
> 1. 异常
> 2. 特殊请求
>
> 处理完毕后自动返回现行程序的断点处，继续执行原程序。

![](https://cdn.jsdelivr.net/gh/zweix123/CS-notes@master/source/Computer-Organization&Architecture/程序中断方式.jpg)

工作流程：

1. 中断请求：中断源向CPU发送中断请求信号
2. 中断响应；
   + 响应中断的条件
   + 中断判优：多个中断源同时提出请求时通过中断判优逻辑响应一个中断源
3. 中断处理
   + 中断隐指令
   + 中断服务程序

### DMA方式





|          | 中断                                              | DMA                                             |
| -------- | ------------------------------------------------- | ----------------------------------------------- |
| 数据传送 | 程序控制<br>程序的切换$\rightarrow$保存和回复现场 | 硬件控制<br>CPU只需进行预处理和后处理           |
| 中断请求 | 传送数据                                          | 后处理                                          |
| 相应     | 指令执行周期结束后结束中断                        | 每个机器周期结束均可，总线空闲时即可相应DMA请求 |
| 场景     | CPU控制，低速设备                                 | DMA控制器控制，高速设备                         |
| 优先级   | 优先级低于DMA                                     | 优先级高于中断                                  |
| 异常处理 | 能处理异常事件                                    | 仅传送数据                                      |

+ 结果和工作流程
+ DMA和CPU对访问主存的冲突的处理方式（三种）
